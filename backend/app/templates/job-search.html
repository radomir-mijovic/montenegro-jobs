{% extends "base.html" %}

{% block title %}Pretraga Poslova u Crnoj Gori | PosaoHub{% endblock %}

{% block description %}Pretražite preko hiljadu poslova u Crnoj Gori. Filtrirajte po gradu, poziciji i kompaniji. Pronađite savršen posao za vas.{% endblock %}

{% block content %}

<!-- JSON-LD Structured Data for Job Postings -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "ItemList",
  "name": "Poslovi u Crnoj Gori",
  "description": "Lista aktivnih poslova u Crnoj Gori",
  "numberOfItems": {{ jobs|length }},
  "itemListElement": [
    {% for job in jobs %}
    {
      "@type": "ListItem",
      "position": {{ loop.index }},
      "item": {
        "@type": "JobPosting",
        "title": "{{ job.title }}",
        "description": "{{ job.title }} - {{ job.company }}",
        "datePosted": "{{ job.created_at.isoformat() if job.created_at else '' }}",
        "validThrough": "{{ job.expires if job.expires else '' }}",
        "employmentType": "FULL_TIME",
        "hiringOrganization": {
          "@type": "Organization",
          "name": "{{ job.company }}"
        },
        "jobLocation": {
          "@type": "Place",
          "address": {
            "@type": "PostalAddress",
            "addressLocality": "{{ job.location }}",
            "addressCountry": "ME"
          }
        },
        "url": "{{ job.url }}"
      }
    }{% if not loop.last %},{% endif %}
    {% endfor %}
  ]
}
</script>
<section class="page-title style-two">
  <div class="auto-container">
    <!-- Job Search Form -->
    <div class="job-search-form">
      <form
        hx-get="/job-query"
        hx-target="#job-result"
      >
        <div class="row">
          <!-- Form Group -->
          <div class="form-group col-lg-5 col-md-12 col-sm-12">
            <span class="icon flaticon-search-1"></span>
            <input
              type="text"
              name="title"
              value="{{ title }}"
              placeholder="Naziv posla, ključne reči ili kompanija"
            />
          </div>

          <!-- Form Group -->
          <div class="form-group col-lg-4 col-md-12 col-sm-12 location">
            <span class="icon flaticon-map-locator"></span>
            <input
              type="text"
              name="city"
              value="{{ city }}"
              placeholder="Grad"
            />
          </div>

          <!-- Form Group -->
          <div class="form-group col-lg-3 col-md-12 col-sm-12 text-right">
            <button type="submit" class="theme-btn btn-style-one">
              Find Jobs
            </button>
          </div>
        </div>
      </form>
    </div>
    <!-- Job Search Form -->
  </div>
</section>
<!--End Page Title-->

<!-- Listing Section -->
<section class="ls-section">
  <div class="auto-container">
    <div class="filters-backdrop"></div>

    <div class="row">
      <!-- Content Column -->
      <div class="content-column col-lg-12">
        <div class="ls-outer">
          <!-- ls Switcher -->

          <div class="row" id="job-result">
            {% include "partials/job-result.html" %}
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
{% endblock %}
